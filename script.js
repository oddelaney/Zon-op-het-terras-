
const options = ["Ticket #5336: 'Vraag: 'Waarom kan ik niet inloggen met mijn oude wachtwoord?''", "Ticket #3268: 'Vraag: 'Waarom doet PowerPoint het niet zonder internet?''", "Ticket #8241: 'Mail met onderwerp 'HELP' en verder geen inhoud'", "Ticket #1552: 'Gebruiker ziet het bestand niet meer — heeft het niet opgeslagen'", "Ticket #5938: 'VPN werkt niet. Opmerking: 'Ik zit wel op de camping met slecht bereik''", "Ticket #9578: 'Gebruiker vraagt of jij 'even wat sneller internet' kan regelen'", "Ticket #2521: 'Vraag: 'Mijn laptop maakt geluid, is dat gevaarlijk?''", "Ticket #4732: 'Iemand meldt: 'De printer geeft fout 404, zit dat in jullie systeem?''", "Ticket #4292: 'Mail: 'Mijn scherm is zwart' — bijlage: foto van uitgeschakelde laptop'", "Ticket #2340: 'Teams start niet op, gebruiker blijft dubbelklikken'", "Ticket #4728: 'Gebruiker vraagt of hij Outlook kan 'verplaatsen naar links''", "Ticket #5933: 'Monitor zwart, oorzaak: stekker ligt los naast bureau'", "Ticket #3674: 'Gebruiker wil dat jij even komt kijken of z’n toetsenbord 'normaal voelt''", "Ticket #7239: 'Gebruiker meldt: 'Ik zie geen bureaublad, alleen maar achtergrond''", "Ticket #2245: 'Vraag: 'Waarom is de map Downloads leeg?''", "Ticket #3305: 'Laptop traag, blijkt 200 tabbladen in Edge open te hebben'", "Ticket #9228: 'Ticket: 'Laptop piept en doet niks meer sinds Windows-update''", "Ticket #8986: 'Gebruiker: 'De cursor doet raar'. (Muis op NumPad-mode)'", "Ticket #3081: 'Vraag: 'Waarom werkt de muis niet via Bluetooth en USB tegelijk?''", "Ticket #7548: 'Teams verwijdert zichzelf bij gebruiker — volgens hem vanzelf'", "Ticket #5969: 'Gebruiker opent Word om een e-mail te typen'", "Ticket #7545: 'Laptop werkt langzaam. Oorzaak: 7 virusscanners tegelijk geïnstalleerd'", "Ticket #7163: 'Gebruiker klaagt dat icoontjes te groot zijn. Zoom staat op 200%'", "Ticket #5818: 'Iemand vraagt of de laptop sneller wordt van meer icoontjes verwijderen'", "Ticket #5978: 'Gebruiker belt omdat hij 2x op Enter heeft gedrukt en nu alles weg is'", "Ticket #2721: 'Laptop doet niets. Stroom blijkt uitgevallen'", "Ticket #5553: 'Gebruiker vraagt of zijn muismat ook vervangen kan worden'", "Ticket #3957: 'Laptop ruikt raar. Gebruiker vraagt of dat normaal is'", "Ticket #2367: 'Gebruiker belt: 'Mijn letters zijn ineens allemaal kapot' — Caps Lock'", "Ticket #2502: 'Ticket: 'Laptop zegt dat hij moet updaten. Mag dat?''", "Ticket #6924: 'Gebruiker belt: 'Ik hoor niks' — geluid blijkt uit'", "Ticket #8903: 'Printer geeft storing. Oorzaak: niet aangezet'", "Ticket #7062: 'Gebruiker vraagt of hij zijn handtekening automatisch kan laten glinsteren'", "Ticket #9257: 'Outlook is ineens 'wit'. (Geen e-mails geopend)'", "Ticket #1227: 'Laptop 'doet niks' volgens gebruiker, scherm blijkt los te liggen'", "Ticket #2320: 'Vraag: 'Waarom staat mijn Word-bestand niet op de printer?''", "Ticket #7687: 'Ticket: 'Mijn laptop slaapt te snel. Kunnen we hem wakker houden?''", "Ticket #5115: 'Vraag: 'Waarom zie ik jullie wifi wel thuis maar niet op werk?''", "Ticket #9665: 'Gebruiker meldt dat zijn Google is verdwenen'", "Ticket #7802: 'Iemand heeft per ongeluk 'iets verwijderd' — wat precies, weten ze niet'", "Ticket #3192: 'Toetsenbord staat op Frans, maar niemand heeft iets aangepast'", "Ticket #6225: 'Gebruiker vraagt of hij z’n e-mail ook kan gebruiken als hij geen internet heeft'", "Ticket #9194: 'Gebruiker meldt: 'Ik ben ingelogd op een andere computer, is dat erg?''", "Ticket #9654: 'Ticket: 'Waarom kan ik niet printen op de printer van een ander kantoor?''", "Ticket #7627: 'Gebruiker meldt dat zijn linkermuisknop 'anders voelt' dan gisteren'", "Ticket #3787: 'Ticket: 'Er staat een rare melding op het scherm — maar die is nu weg''", "Ticket #4461: 'Vraag: 'Waarom moet ik überhaupt opnieuw opstarten?''", "Ticket #3177: 'Gebruiker heeft AVG uit 2005 geïnstalleerd voor extra veiligheid'", "Ticket #5751: 'Printer bij sales doet het niet. Niemand weet waarom'", "Ticket #3980: 'Vraag: 'Waarom krijg ik geen wifi in de kelder?''", "Ticket #4744: 'Vraag: 'Hoe maak ik een screenshot van een A3-document?''", "Ticket #9624: 'Vraag: 'Waarom gaat de muis naar rechts als ik links beweeg?''", "Ticket #4520: 'Collega vraagt of jij even zijn HDMI-kabel kan vervangen — spoed'", "Ticket #4236: 'Vraag: 'Kan jij Teams op m’n privé-iPad installeren?''", "Ticket #7111: 'Laptop start traag. Gebruiker meldt dat hij er 56 programma’s op heeft'", "Ticket #3776: 'Gebruiker meldt dat bureaustoel kraakt — ticket ingediend bij ICT'", "Ticket #3649: 'Eerste ticket van de dag: 'Wachtwoord klopt niet meer sinds vanmorgen''", "Ticket #4462: 'Gebruiker belt dat hij per ongeluk Word heeft verwijderd'", "Ticket #8077: 'Gebruiker heeft mail verwijderd, vraagt of jij het kan terughalen 'uit de cloud ofzo''", "Ticket #1970: 'Vraag: 'Kan ik mijn toetsenbord draadloos maken met bluetooth spray?''", "Ticket #3666: 'Gebruiker heeft zijn bureaublad versleept en denkt dat alles weg is'", "Ticket #2646: 'Gebruiker belt: 'Ik zie geen muis meer' — draadje blijkt los'", "Ticket #2748: 'Gebruiker zegt dat de laptop warm wordt — staat al 3 dagen aan'", "Ticket #4906: 'Gebruiker heeft gisteren wachtwoord laten resetten, maar weet hem nu alweer niet'", "Ticket #6995: 'Gebruiker belt: 'Mijn icoontjes staan verkeerd' — heeft zelf alles versleept'", "Ticket #5508: 'Ticket: 'Mijn laptop werkte gisteren nog prima, nu niks meer' — koffie in toetsenbord'", "Ticket #9296: 'Excel opent traag, gebruiker denkt dat zijn PC gehackt is'", "Ticket #1024: 'Gebruiker vraagt hoe hij via internet naar internet kan'", "Ticket #4739: 'Gebruiker print Excel op A4 maar wil dat het op 1 pagina past — 93 kolommen'", "Ticket #1985: 'Gebruiker: 'Ik heb niks gedaan', maar laptop mist halve toetsenbord'", "Ticket #5304: 'Vraag: 'Kan ik de cloud ook lokaal installeren?''", "Ticket #2926: 'Gebruiker meldt dat de printer niet print — blijkt op zwart-wit te staan'", "Ticket #7534: 'Vraag: 'Kan jij m’n handtekening in Outlook opmaken met glitter?''", "Ticket #2095: 'Vraag: 'Kan jij via afstand mijn thuis-wifi fixen?''", "Ticket #8104: 'Gebruiker vraagt om nieuw toetsenbord. Reden: spatiebalk voelt 'moe''", "Ticket #7600: 'Gebruiker installeert zelf printerdriver voor een hele andere printer'", "Ticket #6976: 'Gebruiker vraagt waarom zijn Google 'wit' is geworden'", "Ticket #4181: 'Gebruiker heeft pc uitgezet via stekker en wil weten waarom hij nu niet opstart'", "Ticket #1838: 'Vraag: 'Waarom blijft mijn muis hangen als ik de laptop sluit?''", "Ticket #2558: 'Gebruiker vraagt waarom hij zijn wachtwoord moet veranderen, alweer'", "Ticket #4198: 'Vraag: 'Hoe reset ik een screenshot?''", "Ticket #7863: 'Gebruiker start zijn laptop 4 keer per dag opnieuw 'voor de zekerheid''", "Ticket #5128: 'Vraag: 'Kan je even helpen met deze foutmelding?' (Geen bijlage)'", "Ticket #8427: 'Excel wordt gebruikt als tekstverwerker. Klopt dat?'", "Ticket #3228: 'Mail: 'Ik weet niet wat ik gedaan heb maar het werkt niet meer''", "Ticket #1004: 'Gebruiker meldt dat zijn collega een andere achtergrond heeft en hij wil dat ook'", "Ticket #3122: 'Vraag: 'Wat gebeurt er als ik op Enter blijf drukken?''", "Ticket #8802: 'Gebruiker vraagt of Teams ook werkt zonder account'", "Ticket #9001: 'Gebruiker snapt het verschil niet tussen opslaan en verzenden'", "Ticket #3422: 'Gebruiker heeft bureaublad in 17 mappen met naam 'nieuw' gesleept'", "Ticket #9018: 'Gebruiker heeft iemand thuis laten 'kijken naar de laptop' — nu doet ie nog minder'"];

const messageEl = document.getElementById("message");
const ball = document.getElementById("magicBall");
const sound = new Audio('shake.mp3');

let lastX = null, lastY = null, lastZ = null, lastTime = Date.now();
let cooldown = false;

function shakeHandler() {
  if (cooldown) return;
  cooldown = true;

  const shuffled = [...options].sort(() => 0.5 - Math.random());
  const randomIndex = Math.floor(Math.random() * shuffled.length);

  messageEl.classList.remove("ticket-animate");
  void messageEl.offsetWidth;
  messageEl.textContent = shuffled[randomIndex];
  messageEl.classList.add("ticket-animate");

  ball.classList.add("shake");
  setTimeout(() => ball.classList.remove("shake"), 600);

  sound.currentTime = 0;
  sound.play().catch(() => {
    console.warn("Geluid kon niet automatisch afgespeeld worden.");
  });

  setTimeout(() => {
    cooldown = false;
  }, 1500);
}

function handleMotion(event) {
  const acc = event.accelerationIncludingGravity;
  const currentTime = Date.now();

  if ((currentTime - lastTime) > 100) {
    const deltaX = acc.x - (lastX || 0);
    const deltaY = acc.y - (lastY || 0);
    const deltaZ = acc.z - (lastZ || 0);
    const speed = Math.abs(deltaX + deltaY + deltaZ);

    if (speed > 25) {
      shakeHandler();
    }

    lastX = acc.x;
    lastY = acc.y;
    lastZ = acc.z;
    lastTime = currentTime;
  }
}

function initMotion() {
  if (typeof DeviceMotionEvent !== 'undefined' && typeof DeviceMotionEvent.requestPermission === 'function') {
    DeviceMotionEvent.requestPermission()
      .then(permissionState => {
        if (permissionState === 'granted') {
          window.addEventListener("devicemotion", handleMotion);
          document.getElementById("permissionBtn").style.display = "none";
          console.log("Bewegingstoegang verleend.");
        } else {
          alert("Toegang tot beweging geweigerd.");
        }
      })
      .catch(e => {
        console.error("Fout bij vragen om toestemming:", e);
      });
  } else {
    window.addEventListener("devicemotion", handleMotion);
    document.getElementById("permissionBtn").style.display = "none";
    console.log("Bewegingsdetectie ingeschakeld zonder toestemming.");
  }
}

document.getElementById("permissionBtn").addEventListener("click", initMotion);
