
const options = ["Ticket #7692: 'Gebruiker heeft alle icoontjes verwijderd 'om het bureaublad op te ruimen''", "Ticket #2262: 'Gebruiker vraagt of hij Excel kan gebruiken om een uitnodiging te ontwerpen'", "Ticket #2350: 'Gebruiker heeft gister wachtwoord laten resetten maar weet hem nu niet meer'", "Ticket #4403: 'Gebruiker meldt: 'Ik hoor mezelf praten via Teams, is dat normaal?''", "Ticket #1323: 'Gebruiker: 'Ik heb de laptop in de vriezer gelegd, want hij was warm''", "Ticket #2310: 'Gebruiker zegt dat de muis niet werkt. Stekker ligt op bureau'", "Ticket #2416: 'Gebruiker belt: 'Mijn toetsenbord doet het niet meer' — batterij leeg'", "Ticket #1314: 'Ticket: gebruiker heeft zijn bureaublad in 43 mappen gesleept'", "Ticket #6561: 'Vraag: 'Ik wil iets verwijderen, maar ik weet niet wat. Kan jij kiezen?''", "Ticket #2143: 'Gebruiker klaagt: 'Ik typ heel snel maar de pc snapt mij niet''", "Ticket #2491: 'Laptop doet het niet. Gebruiker heeft koffie gemorst, maar 'was maar een beetje''", "Ticket #6139: 'Vraag: 'Waarom zie ik mezelf in beeld tijdens een Teams-call?''", "Ticket #3775: 'Gebruiker belt: 'Ik zie een blauw scherm met tekst, is dat normaal?''", "Ticket #6004: 'Gebruiker meldt: 'Mijn bureaublad is weg' — explorer is gesloten'", "Ticket #6299: 'Laptop scherm ligt eraf maar gebruiker zegt niks gedaan te hebben'", "Ticket #5435: 'Ticket: geluid doet het niet — blijkt dat koptelefoon nog in jaszak zit'", "Ticket #1091: 'Gebruiker heeft zijn account 13 keer geblokkeerd en zegt dat het systeem fout zit'", "Ticket #8766: 'Gebruiker belt: 'De computer piept bij opstarten, heb ik hem gehackt?''", "Ticket #4846: 'Laptop viel van tafel, 'maar hij deed het daarna gewoon nog even''", "Ticket #1939: 'Ticket: Gebruiker heeft monitor geroteerd en vraagt of jij dat recht kan zetten'", "Ticket #7962: 'Gebruiker heeft wachtwoord op Post-it geplakt — is kwijt'", "Ticket #9612: 'Gebruiker belt omdat de muis 'achteruit' beweegt'", "Ticket #8056: 'Ticket: 'Mijn Word document wil niet meer verder typen' — disk full'", "Ticket #3490: 'Gebruiker meldt: 'Ik heb niks gedaan', maar Outlook is in het Frans'", "Ticket #2379: 'Vraag: 'Hoeveel mails kan ik verwijderen voordat het kapot gaat?''", "Ticket #4862: 'Mijn muis doet het niet, maar ik heb wel net het snoer eruit getrokken'", "Ticket #8749: 'Vraag: 'Als ik geen wifi heb, kan ik dan wel inloggen op Teams?''", "Ticket #9942: 'Gebruiker belt: 'Ik ben vergeten wat ik wilde melden, maar het was iets met Outlook''", "Ticket #5658: 'De printer bij sales doet het niet. Niemand heeft iets veranderd. Natuurlijk niet'", "Ticket #5229: 'Gebruiker: 'Kan ik wifi bij de lift krijgen? Mijn mobiel pakt niks''", "Ticket #8663: 'Gebruiker meldt: 'Mijn e-mail is traag, kun je het sneller maken?''", "Ticket #7521: 'Gebruiker vraagt: 'Kan ik e-mails uitprinten met alleen de bijlage, zonder tekst?''", "Ticket #8901: 'Gebruiker print op locatie X terwijl hij in locatie Y zit, begrijpt niet waarom dat niet werkt'", "Ticket #7384: 'Mijn laptop deed raar dus ik heb een kennis laten kijken, nu doet hij nog minder'", "Ticket #5305: 'Vraag: 'Waarom sluit mijn laptop af als ik op afsluiten klik?''", "Ticket #8344: 'Gebruiker vraagt: 'Hoe krijg ik PowerPoint op papier in beweging?''", "Ticket #3853: 'Vraag: 'Ik krijg geen geluid via de speaker, maar via koptelefoon hoor ik wel... die ligt in de kast''", "Ticket #3652: 'Gebruiker vraagt: 'Kan jij de printer updaten via bluetooth?''", "Ticket #1935: 'Vraag: 'Hoe verander ik het geluid van binnenkomende e-mails in een liedje?''", "Ticket #4337: 'Gebruiker meldt: 'Mijn camera doet het niet' — sticker erop'", "Ticket #6455: 'Gebruiker meldt: 'Mijn muis loopt weg van waar ik wil klikken''", "Ticket #3602: 'VPN werkt niet. Oorzaak: gebruiker heeft software verwijderd 'om ruimte te maken''", "Ticket #8734: 'Gebruiker meldt dat hij geen letters kan typen — Caps Lock staat aan'", "Ticket #7298: 'Vraag: 'Als ik op print druk, waar komt dat dan uit?''", "Ticket #6012: 'Vraag: 'Waarom komt er een rookgeur uit m’n oplader?''", "Ticket #2565: 'Laptop is 'traag sinds weekend'. Gebruiker heeft 4 games geïnstalleerd'", "Ticket #6469: 'Laptop werkt niet. Gebruiker: 'Ja ik heb hem van de trap laten vallen, maar dat was vorige week''", "Ticket #1818: 'Outlook werkt niet. Gebruiker denkt dat jij dat 'op afstand wel kunt aanzetten''", "Ticket #8097: 'VPN werkt niet. Gebruiker is op vakantie in een houten boshut'", "Ticket #3224: 'Gebruiker meldt dat zijn laptop zweet. Blijkt condens na fietstocht'", "Ticket #2148: 'Gebruiker: 'Waarom moet ik elke dag mijn pc uitzetten, dat is toch irritant?''", "Ticket #8920: 'Gebruiker heeft wachtwoord gewijzigd, maar zegt nu: 'ik vond die oude eigenlijk toch fijner''", "Ticket #2101: 'Teams werkt niet. Gebruiker blijkt ingelogd met 3 accounts tegelijk'", "Ticket #6646: 'Vraag: 'Hoe zet ik mijn computerscherm verticaal, voor TikTok?''", "Ticket #1597: 'Gebruiker vraagt: 'Waarom moet ik wachten op updates, dat is mijn tijd toch?''", "Ticket #6630: 'Vraag: 'Waarom doet alleen mijn rechter USB-poort het niet als ik boos ben?''", "Ticket #9298: 'Vraag: 'Kan ik Office ook installeren op mijn smartwatch?''", "Ticket #7915: 'Gebruiker klaagt dat de muis te snel gaat. Instelling staat op normaal'", "Ticket #2677: 'Jeroen van management vraagt hoe je een PDF omzet naar Word'", "Ticket #3426: 'Vraag: 'Kan jij op afstand m’n wifi verbeteren?''", "Ticket #5538: 'Vraag: 'Hoeveel keer per dag mag ik mijn wachtwoord resetten?''", "Ticket #6993: 'Gebruiker wil dat jij een afspraak maakt met Ziggo'", "Ticket #2294: 'Gebruiker meldt: 'Mijn scherm is donker, maar ik hoor wel geluid' — helderheid op 0'", "Ticket #3439: 'Ticket: Gebruiker ziet 'iets raars' op het scherm, maar weigert screenshot te sturen'", "Ticket #4681: 'Gebruiker belt dat laptop 'niet lekker voelt vandaag''", "Ticket #1088: 'Laptop start niet meer op. Gebruiker heeft gisteren wel Windows 'opgeruimd''", "Ticket #2373: 'Vraag: 'Waarom kan ik mijn iPad niet verbinden met de fax?''", "Ticket #8407: 'Gebruiker vraagt: 'Kan ik mijn telefoon opladen via mijn toetsenbord?''", "Ticket #3437: 'Gebruiker snapt niet waarom de laptop niet werkt zonder stroom'", "Ticket #6445: 'Gebruiker: 'De printer maakt geen geluid meer, is hij dood?''", "Ticket #5566: 'Waarom moet ik m’n wachtwoord wijzigen? Het oude werkte toch prima'", "Ticket #1583: 'Laptop start ineens op in BIOS. Gebruiker: 'Ik heb alleen op escape gedrukt... vaak''", "Ticket #2294: 'Gebruiker denkt dat e-mail vertraagd is door volle inbox — 21.442 ongelezen'", "Ticket #4118: 'Gebruiker meldt: 'Mijn laptop is te warm om op schoot te houden''", "Ticket #8084: 'Laptop reageert niet meer — kat heeft op toetsenbord gelegen'", "Ticket #3045: 'Vraag: 'Ik heb iets verwijderd, maar weet niet wat. Kan jij dat terughalen?''", "Ticket #5881: 'Laptop start niet — stekker in waterkoker'", "Ticket #4477: 'Gebruiker print zwart-wit en klaagt over kleurkwaliteit'", "Ticket #3916: 'Outlook doet raar. Gebruiker heeft systeemtaal op Koreaans gezet'", "Ticket #5243: 'Vraag: 'Ik krijg geen e-mail binnen, maar mijn collega wel. Is dat discriminatie?''", "Ticket #3574: 'Gebruiker: 'Ik snap het niet, ik heb wel geklikt maar er gebeurt niks''", "Ticket #3588: 'Gebruiker belt: 'Er komt rook uit mijn oplader, hoort dat?''", "Ticket #3464: 'Gebruiker vraagt of hij updates mag overslaan 'want dat duurt zo lang''", "Ticket #3861: 'Gebruiker zegt: 'Ik hoorde een piepje en toen was alles weg''", "Ticket #5492: 'Gebruiker meldt: 'Ik heb een update gedaan maar snap nu niks meer''", "Ticket #7598: 'Ticket: gebruiker heeft zelf drivers geïnstalleerd, nu niks meer'", "Ticket #6077: 'Gebruiker heeft Teams verwijderd omdat 'het raar deed''", "Ticket #1559: 'Laptop klinkt als een vliegtuig. Gebruiker heeft hem sinds 2020 niet herstart'", "Ticket #3955: 'Gebruiker zegt dat de laptop rookt, maar heeft geen brand gemeld'", "Ticket #2219: 'Ticket: gebruiker meldt 'alles is traag' — 186 tabbladen open'", "Ticket #9627: 'Gebruiker meldt: 'Er staat een foutcode, maar ik heb hem weggeklikt''", "Ticket #8857: 'Gebruiker denkt dat Google 'stuk' is omdat startpagina wit blijft'", "Ticket #5194: 'Gebruiker meldt: 'Mijn toetsenbord doet spaans' — taalinstelling aangepast'", "Ticket #8389: 'Ticket: gebruiker belt met klacht over muis, blijkt de afstandsbediening te zijn'", "Ticket #1733: 'Gebruiker wil zijn e-mailhandtekening in Comic Sans met regenboogkleur'"];

const messageEl = document.getElementById("message");
const ball = document.getElementById("magicBall");
const sound = new Audio('shake.mp3');

let lastX = null, lastY = null, lastZ = null, lastTime = Date.now();
let cooldown = false;

function shakeHandler() {
  if (cooldown) return;
  cooldown = true;

  const shuffled = [...options].sort(() => 0.5 - Math.random());
  const randomIndex = Math.floor(Math.random() * shuffled.length);

  messageEl.classList.remove("ticket-animate");
  void messageEl.offsetWidth;
  messageEl.textContent = shuffled[randomIndex];
  messageEl.classList.add("ticket-animate");

  ball.classList.add("shake");
  setTimeout(() => ball.classList.remove("shake"), 600);

  sound.currentTime = 0;
  sound.play().catch(() => {
    console.warn("Geluid kon niet automatisch afgespeeld worden.");
  });

  setTimeout(() => {
    cooldown = false;
  }, 1500);
}

function handleMotion(event) {
  const acc = event.accelerationIncludingGravity;
  const currentTime = Date.now();

  if ((currentTime - lastTime) > 100) {
    const deltaX = acc.x - (lastX || 0);
    const deltaY = acc.y - (lastY || 0);
    const deltaZ = acc.z - (lastZ || 0);
    const speed = Math.abs(deltaX + deltaY + deltaZ);

    if (speed > 25) {
      shakeHandler();
    }

    lastX = acc.x;
    lastY = acc.y;
    lastZ = acc.z;
    lastTime = currentTime;
  }
}

function initMotion() {
  if (typeof DeviceMotionEvent !== 'undefined' && typeof DeviceMotionEvent.requestPermission === 'function') {
    DeviceMotionEvent.requestPermission()
      .then(permissionState => {
        if (permissionState === 'granted') {
          window.addEventListener("devicemotion", handleMotion);
          document.getElementById("permissionBtn").style.display = "none";
          console.log("Bewegingstoegang verleend.");
        } else {
          alert("Toegang tot beweging geweigerd.");
        }
      })
      .catch(e => {
        console.error("Fout bij vragen om toestemming:", e);
      });
  } else {
    window.addEventListener("devicemotion", handleMotion);
    document.getElementById("permissionBtn").style.display = "none";
    console.log("Bewegingsdetectie ingeschakeld zonder toestemming.");
  }
}

document.getElementById("permissionBtn").addEventListener("click", initMotion);

const statusLabel = document.getElementById("statusLabel");
const statuses = ["Open", "In behandeling", "Gesloten"];

function updateStatus() {
  const status = statuses[Math.floor(Math.random() * statuses.length)];
  statusLabel.textContent = "Status: " + status;
  statusLabel.setAttribute("data-status", status);
}

const originalShakeHandler = shakeHandler;
shakeHandler = function () {
  originalShakeHandler();
  updateStatus();
};
